<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„è‚¡ç¥¨æ•¸æ“šä¸­å¿ƒ</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: #f4f7f9; color: #333; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { max-width: 800px; width: 100%; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { color: #1a73e8; text-align: center; }
        .update-info { text-align: center; color: #666; font-size: 0.9em; margin-bottom: 30px; }
        .stock-list { list-style: none; padding: 0; }
        .stock-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #eee; transition: background 0.2s; }
        .stock-item:hover { background-color: #f9f9f9; }
        .stock-info { display: flex; flex-direction: column; }
        .stock-symbol { font-weight: bold; font-size: 1.1em; color: #202124; }
        .btn-download { background-color: #1a73e8; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; text-decoration: none; font-size: 0.9em; }
        .btn-download:hover { background-color: #1765cc; }
        footer { margin-top: 40px; color: #999; font-size: 0.8em; }
        .error { color: #d93025; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ˆ æˆ‘çš„è‚¡ç¥¨æ•¸æ“šä¸­å¿ƒ</h1>
        <p class="update-info" id="updateTime">è¼‰å…¥ä¸­...</p>
        
        <ul class="stock-list" id="stockList">
            <!-- é€™è£¡ç”± JS è‡ªå‹•ç”Ÿæˆ -->
            <p style="text-align: center;">æ­£åœ¨è®€å–æ•¸æ“š...</p>
        </ul>
    </div>

    <footer>
        è³‡æ–™ä¾†æºï¼šYahoo Finance (via yfinance)
    </footer>

    <script>
        async function loadStocks() {
            try {
                // æ”¹è®€ metadata.jsonï¼Œé€™æ¯”è®€ txt æ›´ç©©å®š
                const response = await fetch('metadata.json?t=' + new Date().getTime()); // åŠ æ™‚é–“æˆ³é˜²æ­¢å¿«å–
                if (!response.ok) throw new Error("Metadata not found");
                
                const data = await response.json();
                
                // æ›´æ–°æ™‚é–“
                document.getElementById('updateTime').innerText = `æœ€å¾Œæ›´æ–°ï¼š${data.last_updated}`;
                
                const listContainer = document.getElementById('stockList');
                listContainer.innerHTML = '';

                data.stocks.forEach(symbol => {
                    const li = document.createElement('li');
                    li.className = 'stock-item';
                    
                    const downloadUrl = `my_stock_data/${symbol}.json`;
                    
                    li.innerHTML = `
                        <div class="stock-info">
                            <span class="stock-symbol">${symbol}</span>
                        </div>
                        <a href="${downloadUrl}" download="${symbol}.json" class="btn-download">ğŸ“¥ ä¸‹è¼‰ JSON</a>
                    `;
                    listContainer.appendChild(li);
                });
            } catch (e) {
                console.error(e);
                document.getElementById('stockList').innerHTML = 
                    '<p class="error">âš ï¸ ç„¡æ³•è®€å–æ•¸æ“šç´¢å¼•ã€‚<br>è«‹ç¢ºèª Actions æ˜¯å¦å·²æˆåŠŸåŸ·è¡Œå®Œç•¢ã€‚</p>';
                document.getElementById('updateTime').innerText = 'ç‹€æ…‹ï¼šå°šæœªåˆå§‹åŒ–';
            }
        }

        loadStocks();
    </script>
</body>
</html>